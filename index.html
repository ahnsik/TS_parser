<!DOCTYPE html>
<html>
  <head>
    <!-- <link rel="shortcut icon" href="./favicon.ico"> -->
    <meta charset="utf-8" lang="kr">
    <link rel="stylesheet" type="text/css" href="style/packetparser.css" />
    <title> iSO-10646-1 : TS packet 분석 tool </title>
  </head>
  <body>
    <header>
      <h1>Mpeg System (ISO-10646-1) TS packet 구조 </h1> <h6>by aschoi@aircode.com</h6>
        <img src="./resources/ts_syntax.png"/>
    </header>

    <div class="stream_input">
        스트림파일: <input type="file" id="dvbstp_file_in" accept=".*" onchange="ts_file_changed();"/><span class="comment">Drag & Drop available.</span>
        <br/> 또는 <br/>
        텍스트로 입력 (16진수 DUMP): <br/>
        <textarea id="ts_packet" cols="80" rows="4" onchange="ts_from_text();"></textarea>
    </div>

    <div class="commands" style="text-align: center;">
      <input type="button" value="Parse Next TS packet..(188 bytes)"> </input>
      <input type="button" value="Search & Parse with PID.."> </input> <input id="parsing_pid" type="text" value="PID (hex)"> </input>
    </div>

    <div  class="result">
        <h3>header parsing 결과:</h3>
        <table>
            <th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th>    <th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th>
            <tr>
              <td id="sync_byte" colspan="8">sync byte=0x47</td><td id="ts_error_indi" colspan="1">transport<br/>error<br/>indicator</td>
              <td id="pusi" colspan="1">payload<br/>unit start<br/>indocator</td><td id="ts_priority" colspan="1">transport<br/>priority</td>
              <td id="pid" colspan="13">PID</td><td id="ts_scrmb_ctrl" colspan="2">transport<br/>scrambling<br/>control</td>
              <td id="adapt_field_ctrl" colspan="2">adaptation<br/>field<br/>control</td><td id="cont_count" colspan="4">continuity<br/>counter</td>
            </tr>
            <tr class=".adaptation_field">
                <td id="adapt_field_len" colspan="8">adaptation<br/>field<br/>length</td><td id="discont_indi" colspan="1">discontinuity<br/>indicator</td>
                <td id="rnd_accs_indi" colspan="1">random<br/>access<br/>indicator</td><td id="es_prio_indi" colspan="1">elementary<br/>stream<br/>priority<br/>indicator</td>
                <td id="pcr_flg" colspan="1">PCR<br/>flag</td><td id="opcr_flg" colspan="1">OPCR<br/>flag</td><td id="splc_pont_flg" colspan="1">splicing<br/>point<br/>flag</td>
                <td id="ts_priv_flg" colspan="1">transport<br/>private<br/>data<br/>flag</td><td id="adapt_extent_flg" colspan="1">adaptation<br/>flag<br/>extention<br/>flag</td>
                <td id="option_field" colspan="8">optional<br/>fields</td><td id="stuff_adapt" colspan="8">stuffing<br/>bytes</td>
            </tr>
        </table>

        <p>
          optional fields:<br/>
          <table>
              <th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th>    <th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th>
              <tr>
                <td id="pcr_high" colspan="32">PCR</td>
              </tr>
              <tr>
                <td id="pcr_low" colspan="16">PCR</td><td id="opcr_high" colspan="16">OPCR</td>
              </tr>
              <tr>
                <td id="opcr_low" colspan="32">OPCR</td>
              </tr>
              <tr>
                <td id="splice_cnt_down" colspan="8">splice<br/>countdown</td>
                <td id="ts_priv_data_length" colspan="8">transport<br/>private<br/>data<br/>length</td>
                <td id="priv_data_bytes" colspan="16">private<br/>data<br/>bytes</td>
              </tr>
              <tr class=".adaptation_extention">
                <td id="adapt_extent_length" colspan="8">adaptation<br/>field extention<br/>length</td>
                <td id="ltw_flg" colspan="1">LTW<br/>flag</td>
                <td id="pcw_rate_flg" colspan="1">piece<br/>wise<br/>rate<br/>flag</td>
                <td id="smls_splic_flg" colspan="1">seamless<br/>splice<br/>flag</td>
                <td id="reserved" colspan="5">reserved</td>
                <td id="adapt_option_field" colspan="16">----</td>
              </tr>
          </table>
        </p>
    </div>

    <div class="result" id="payload">
      <h3>PAYLOAD STACK:</h3>
      <h4>PID: <span id="payload_1_pid"></span> </h4>
      <textarea name="payload_hex" id="payload_hex" cols="120" rows="10"></textarea>
      <input type="button" value="TXT파일로저장"/><input type="button" value="bin파일로저장"/>
    </div>

  </body>

  <script src="./script/ts_parser.js" type="text/javascript" charset="utf-8"> </script>
</html>

